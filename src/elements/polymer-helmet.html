<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<dom-module id="polymer-helmet">
  <template></template>

  <script>
    /* eslint-disable max-len */


    class PolymerHelmet extends Polymer.Element {
      static get is() {
        return 'polymer-helmet';
      }

      static get properties() {
        return {
          active: Boolean,
          title: String,
          description: String,
          image: String,
          _defaultTitle: {
            type: String,
            value: '{$ title $}',
          },
          _defaultDescription: {
            type: String,
            value: '{$ description $}',
          },
          _defaultImage: {
            type: String,
            value: '{$ image if image.startsWith("http") else (url + image) $}',
          },
        };
      }

      static get observers() {
        return [
          '_setMetaInfo(active, title, description, image)',
        ];
      }

      _setMetaInfo(active, title, description, image) {
        if (active) {
          document.title = title || this._defaultTitle;
          document.querySelector('meta[name="description"]').content = description || this._defaultDescription;
          // G+
          document.querySelector('meta[itemprop="name"]').content = title || this._defaultTitle;
          document.querySelector('meta[itemprop="description"]').content = description || this._defaultDescription;
          document.querySelector('meta[itemprop="image"]').content = image || this._defaultImage;
          // Facebook
          document.querySelector('meta[property="og:title"]').content = title || this._defaultTitle;
          document.querySelector('meta[property="og:description"]').content = description || this._defaultDescription;
          document.querySelector('meta[property="og:image"]').content = image || this._defaultImage;
          // Twitter
          document.querySelector('meta[name="twitter:title"]').content = title || this._defaultTitle;
          document.querySelector('meta[name="twitter:description"]').content = description || this._defaultDescription;
          document.querySelector('meta[name="twitter:image"]').content = image || this._defaultImage;
        }
      }
    }

    customElements.define(PolymerHelmet.is, PolymerHelmet);
  </script>
</dom-module>
